server {
    # Listen on port 8080, as required by Cloud Run
    listen 8080;

    # Set the root directory to where our static files are
    root /usr/share/nginx/html;
    index index.html;

    # This is the most important part for a Single Page Application (SPA)
    location / {
        # Try to serve the requested file directly (e.g., /assets/logo.png)
        # If it's a directory, try to serve its index file.
        # If neither is found, fall back to serving /index.html.
        # This allows React Router to handle the URL.
        try_files $uri $uri/ /index.html;
    }

    # Optional: Add headers to improve security and prevent clickjacking
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
}